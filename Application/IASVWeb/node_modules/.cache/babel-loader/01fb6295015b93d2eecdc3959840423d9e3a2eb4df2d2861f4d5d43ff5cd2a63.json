{"ast":null,"code":"import React,{useState,useEffect}from'react';import{searchClubs}from'./api';// Importer la fonction de recherche des clubs\nimport'./css/SearchClub.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchClub=_ref=>{let{onSelectClub}=_ref;const[searchTerm,setSearchTerm]=useState('');const[clubs,setClubs]=useState([]);const[recentClubs,setRecentClubs]=useState([]);const[timeoutId,setTimeoutId]=useState(null);const handleSearch=async()=>{if(searchTerm.trim()===''){setClubs(recentClubs);return;}const clubData=await searchClubs(searchTerm);setClubs(clubData.slice(0,3));// Limite les résultats à 3\n};useEffect(()=>{if(timeoutId){clearTimeout(timeoutId);}const id=setTimeout(()=>{handleSearch();},1000);setTimeoutId(id);return()=>clearTimeout(id);},[searchTerm]);useEffect(()=>{const savedRecentClubs=JSON.parse(localStorage.getItem('recentClubs'))||[];setRecentClubs(savedRecentClubs);},[]);const updateRecentClubs=club=>{const updatedClubs=[club,...recentClubs.filter(c=>c.name!==club.name)].slice(0,5);setRecentClubs(updatedClubs);localStorage.setItem('recentClubs',JSON.stringify(updatedClubs));};const handleClubClick=club=>{setSearchTerm(\"\");onSelectClub(club);updateRecentClubs(club);};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-club-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Rechercher un club\"})}),/*#__PURE__*/_jsx(\"ul\",{children:clubs.length===0&&searchTerm===''?recentClubs.map((club,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleClubClick(club),children:[/*#__PURE__*/_jsx(\"img\",{src:club.logo,alt:\"\".concat(club.name,\" logo\")}),/*#__PURE__*/_jsx(\"span\",{children:club.name})]},index)):clubs.map((club,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleClubClick(club),children:[/*#__PURE__*/_jsx(\"img\",{src:club.logo,alt:\"\".concat(club.name,\" logo\")}),/*#__PURE__*/_jsx(\"span\",{children:club.name})]},index))})]});};export default SearchClub;","map":{"version":3,"names":["React","useState","useEffect","searchClubs","jsx","_jsx","jsxs","_jsxs","SearchClub","_ref","onSelectClub","searchTerm","setSearchTerm","clubs","setClubs","recentClubs","setRecentClubs","timeoutId","setTimeoutId","handleSearch","trim","clubData","slice","clearTimeout","id","setTimeout","savedRecentClubs","JSON","parse","localStorage","getItem","updateRecentClubs","club","updatedClubs","filter","c","name","setItem","stringify","handleClubClick","className","children","type","value","onChange","e","target","placeholder","length","map","index","onClick","src","logo","alt","concat"],"sources":["C:/perso/IA Sport Vision/Application/IASV/src/components/SearchClub.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { searchClubs } from './api'; // Importer la fonction de recherche des clubs\r\nimport './css/SearchClub.css';\r\n\r\nconst SearchClub = ({ onSelectClub }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [clubs, setClubs] = useState([]);\r\n  const [recentClubs, setRecentClubs] = useState([]);\r\n  const [timeoutId, setTimeoutId] = useState(null);\r\n\r\n  const handleSearch = async () => {\r\n    if (searchTerm.trim() === '') {\r\n      setClubs(recentClubs);\r\n      return;\r\n    }\r\n\r\n    const clubData = await searchClubs(searchTerm);\r\n    setClubs(clubData.slice(0, 3)); // Limite les résultats à 3\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (timeoutId) {\r\n      clearTimeout(timeoutId);\r\n    }\r\n\r\n    const id = setTimeout(() => {\r\n      handleSearch();\r\n    }, 1000);\r\n\r\n    setTimeoutId(id);\r\n\r\n    return () => clearTimeout(id);\r\n  }, [searchTerm]);\r\n\r\n  useEffect(() => {\r\n    const savedRecentClubs = JSON.parse(localStorage.getItem('recentClubs')) || [];\r\n    setRecentClubs(savedRecentClubs);\r\n  }, []);\r\n\r\n  const updateRecentClubs = (club) => {\r\n    const updatedClubs = [club, ...recentClubs.filter(c => c.name !== club.name)].slice(0, 5);\r\n    setRecentClubs(updatedClubs);\r\n    localStorage.setItem('recentClubs', JSON.stringify(updatedClubs));\r\n  };\r\n\r\n  const handleClubClick = (club) => {\r\n    setSearchTerm(\"\");\r\n    onSelectClub(club);\r\n    updateRecentClubs(club);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-club-container\">\r\n\t\r\n      <div className=\"input-container\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          placeholder=\"Rechercher un club\"\r\n        />\r\n      </div>\r\n      <ul>\r\n        {clubs.length === 0 && searchTerm === '' ? (\r\n          recentClubs.map((club, index) => (\r\n            <li key={index} onClick={() => handleClubClick(club)}>\r\n              <img src={club.logo} alt={`${club.name} logo`} />\r\n              <span>{club.name}</span>\r\n            </li>\r\n          ))\r\n        ) : (\r\n          clubs.map((club, index) => (\r\n            <li key={index} onClick={() => handleClubClick(club)}>\r\n              <img src={club.logo} alt={`${club.name} logo`} />\r\n              <span>{club.name}</span>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchClub;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}